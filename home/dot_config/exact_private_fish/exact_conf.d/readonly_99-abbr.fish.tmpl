# Generated by chezmoi
status is-interactive || exit 0

{{- range $name, $expansion := .settings.shell.fish.abbrev }}
abbr -a {{ $name | quote }} {{ $expansion | quote }}
{{- end }}

{{- range $name, $expansion := .settings.shell.common.abbrev }}
type -qf {{ first ($expansion | splitList " ") }} && abbr -a {{ $name }} {{ $expansion | quote }}
{{- end }}

{{- if eq .chezmoi.os "linux" }}

abbr -a pbcopy wl-copy
abbr -a wlcp wl-copy
abbr -a xcp wl-copy
abbr -a pbpaste wl-paste
abbr -a wlp wl-paste
abbr -a ping4 'ping -4'
abbr -a ping6 'ping -6'
abbr -a ports 'netstat -ntup'
abbr -a trash 'gio trash'

{{- else if eq .chezmoi.os "darwin" }}

abbr -a wl-copy pbcopy
abbr -a wlcp pbcopy
abbr -a wl-paste pbpaste
abbr -a wlp pbpaste

{{- end }}

# Complex abbreviations
abbr -a !! --position anywhere --function _last_history_item
abbr -a dotdot --regex '^\.\.+$' --function _multicd

if string match -vqr '^[0123]\.*' $version
    # These regex expressions were generated with grex
    abbr -a brew::subcommands -c brew -r '^(post_install|remove|home|abv|dr|l[cns]|rm|tc|up)$' -f _abbrev_brew_subcommands
    abbr -a bun::subcommands -c bun -r '^(rm|up|[aci])$' -f _abbrev_bun_subcommands
    abbr -a chezmoi::subcommands -c chezmoi -r '^(dr|up|[as])$' -f _abbrev_chezmoi_subcommands
    abbr -a git::subcommands -c git -r '^(co|st|c|[abd])$' -f _abbrev_git_subcommands
    abbr -a mise::subcommands -c mise -r '^(r(emove|m)|l(ist|n)|cfg|gen|up|dr|sh|[ru]|[abeiptv-x])$' -f _abbrev_mise_subcommands
end
