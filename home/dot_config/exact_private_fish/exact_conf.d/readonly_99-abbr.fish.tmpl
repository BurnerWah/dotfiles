# Generated by chezmoi
status is-interactive || exit 0

{{- range $name, $expansion := .settings.shell.fish.abbrev }}
abbr -a {{ $name | quote }} {{ $expansion | quote }}
{{- end }}

{{- range $name, $expansion := .settings.shell.common.abbrev }}
type -qf {{ first ($expansion | splitList " ") }} && abbr -a {{ $name }} {{ $expansion | quote }}
{{- end }}

{{- if eq .chezmoi.os "linux" }}

abbr -a pbcopy wl-copy
abbr -a wlcp wl-copy
abbr -a xcp wl-copy
abbr -a pbpaste wl-paste
abbr -a wlp wl-paste
abbr -a ping4 'ping -4'
abbr -a ping6 'ping -6'
abbr -a ports 'netstat -ntup'
abbr -a trash 'gio trash'

{{- else if eq .chezmoi.os "darwin" }}

abbr -a wl-copy pbcopy
abbr -a wlcp pbcopy
abbr -a wl-paste pbpaste
abbr -a wlp pbpaste

{{- end }}

# Complex abbreviations
abbr -a !! --position anywhere --function _last_history_item
abbr -a dotdot --regex '^\.\.+$' --function _multicd

if string match -vqr '^[0123]\.*' $version
    # These regex expressions were generated with grex
    {{- range .settings.shell.fish.subcommand_abbrev }}
    abbr -a '{{.command}}::subcommands' -c '{{.command}}' -r '{{.regex}}' -f '{{.function}}'
    {{- end }}
    {{- range $cmd, $subcmds := .settings.shell.fish.subcommand_abbrevs }}
    for k in {{ keys $subcmds | sortAlpha | join " " }}
        abbr -a "{{$cmd}}::$k" -c "{{$cmd}}" -r "$k" -f _abbrev_managed_subcommands
    end
    {{- end }}
end
