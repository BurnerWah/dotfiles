# Generated by chezmoi

echo '{{ .settings.shell.elvish.completers | toJson }}' | var completers = (from-json)

keys $completers | peach {|name|
  set edit:completion:arg-completer[$name] = {|@arg|
    set edit:completion:arg-completer[$name] = {|@arg|}
    eval (eval $completers[$name] | slurp)
    $edit:completion:arg-completer[$name] $@arg
  }
}

# A for loop won't work here for some reason
echo '{{ .settings.shell.common.windows_executables | sortAlpha | compact | toJson }}' | var win-exes = (from-json)

# peach won't work here for some reason
each {|name|
  # The lambda here is to avoid issues with the earlier usage of `peach`
  set edit:completion:arg-completer[$name".exe"] = {|@arg|
    set edit:completion:arg-completer[$name".exe"] = $edit:completion:arg-completer[$name]
    $edit:completion:arg-completer[$name".exe"] $@arg
  }
} $win-exes
