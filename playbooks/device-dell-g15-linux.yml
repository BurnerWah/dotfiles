---
- name: Dell G15 Linux playbook
  hosts: localhost

  tasks:
    - name: Install main dnf packages
      become: yes
      ansible.builtin.dnf5:
        name:
          - fish
          - git
          - kitty
          - zsh
        state: present

    - name: Remove unwanted RPMs
      become: yes
      ansible.builtin.dnf5:
        name:
          - firefox # prefer flatpak
        state: absent

    - name: Set user's shell to fish
      become: yes
      ansible.builtin.user:
        name: '{{ ansible_user_id }}'
        shell: /usr/bin/fish

    - name: Install flatpaks from flathub
      community.general.flatpak:
        name:
          - app.bluebubbles.BlueBubbles
          - com.github.rafostar.Clapper
          - com.github.tchx84.Flatseal
          - com.github.wwmm.easyeffects
          - com.mattjakeman.ExtensionManager
          - com.obsproject.Studio
          - com.slack.Slack
          - com.ticktick.TickTick
          - com.visualstudio.code
          - com.yubico.yubioath
          - fr.handbrake.ghb
          - io.github.flattool.Warehouse
          - io.github.mpobaschnig.Vaults
          - io.itch.itch
          - md.obsidian.Obsidian
          - org.blender.Blender
          - org.gnome.Geary
          - org.gnome.Lollypop
          - org.mozilla.firefox
          - org.musicbrainz.Picard
          - org.signal.Signal
          - page.tesk.Refine
          - xyz.armcord.ArmCord

    - name: Enable sshd socket activation
      become: yes
      ansible.builtin.systemd_service:
        name: sshd.socket
        enabled: yes
        state: started
